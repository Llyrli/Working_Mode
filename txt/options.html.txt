<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Working Mode — Settings</title>
  <style>
    body { font: 14px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 16px; color: #1a202c; }
    h2, h3 { margin: 12px 0 8px; }
    .muted { color: #718096; }
    .row { display: flex; align-items: center; gap: 8px; }
    label { display:block; margin: 8px 0 4px; }
    input, select, button { padding: 6px 8px; font-size: 14px; }
    code { background: #f7fafc; padding: 2px 6px; border-radius: 4px; }
    .pill { display:inline-block; padding: 2px 8px; border-radius: 999px; font-size:12px; color: #fff; }
    .pill.work { background:#1f8f3e; }
    .pill.rest { background:#c53030; }
    .pill.other { background:#718096; }
    .grid { display:grid; grid-template-columns: 1fr auto auto auto; gap:8px; align-items:center; }
    .grid-head { font-weight:600; }
  </style>
</head>
<body>
  <h2>Settings</h2>

  <label for="apiKey">Gemini API Key</label>
  <input id="apiKey" type="password" placeholder="Paste your API key" />

  <label for="model">Model</label>
  <select id="model">
    <option value="gemini-2.0-flash">gemini-2.0-flash</option>
    <option value="gemini-2.0-pro">gemini-2.0-pro</option>
  </select>

  <label for="interval">Sampling interval (minutes)</label>
  <input id="interval" type="number" min="1" step="1" value="5" />

  <label for="tz">Time zone (IANA)</label>
  <input id="tz" type="text" placeholder="e.g. America/Chicago" />

  <label for="pieRange">Pie & stats range</label>
  <select id="pieRange">
    <option value="1h">Last 1 hour</option>
    <option value="1d" selected>Last 1 day</option>
    <option value="1w">Last 1 week</option>
    <option value="1mo">Last 1 month</option>
    <option value="1y">Last 1 year</option>
  </select>

  <div class="row" style="margin-top:8px;">
    <label class="row" style="gap:6px;">
      <input id="showCategoryTable" type="checkbox" checked />
      <span>Show domain+category table</span>
    </label>
  </div>

  <div class="row" style="margin-top:8px;">
    <button id="save">Save</button>
    <button id="clearAll" style="margin-left:8px;background:#c53030;color:#fff;">Clear all data</button>
    <span id="status" class="muted"></span>
  </div>

  <hr/>

  <h3>Manage categories (fine)</h3>
  <p class="muted">Categories here are first-class for Gemini & the pie. You can add/remove any (including defaults). Map each to umbrella (work/rest/other).</p>

  <div class="row" style="margin:6px 0;">
    <input id="catName" placeholder="e.g. English_learning, entertainment, physics_learning" style="flex:1;" />
    <select id="catUmb">
      <option value="work">work</option>
      <option value="rest">rest</option>
      <option value="other">other</option>
    </select>
    <button id="addCat">Add</button>
  </div>

  <div id="catList"></div>

  <hr/>

  <h3>Learned rules</h3>
  <p class="muted">Automatically learned domain → category mappings.</p>
  <div id="learnedList"></div>

  <script src="options.js"></script>
</body>
</html>
